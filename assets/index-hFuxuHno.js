(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function y(n){return{id:crypto.randomUUID(),name:n,todos:[]}}function P(n,e="",t="",r="low"){return{id:crypto.randomUUID(),title:n,description:e,dueDate:t,priority:r,complete:!1,creadtedAt:new Date().toISOString()}}const x="todo-app-projects";function f(n){localStorage.setItem(x,JSON.stringify(n))}function I(){const n=localStorage.getItem(x);return n?JSON.parse(n):[]}let s=[],i=null;function S(){const n=document.getElementById("app");if(n.innerHTML="",s=I(),s.length===0){const a=y("Work"),L=y("Personal");s.push(a,L)}i=s[0];const e=document.createElement("div");e.classList.add("todo-wrapper");const t=document.createElement("div");t.classList.add("project-add-wrapper");const r=document.createElement("input");r.type="text",r.placeholder="New project name",r.classList.add("form-input");const o=document.createElement("button");o.textContent="+ Add Project",o.classList.add("add-task-btn"),o.addEventListener("click",()=>{const a=r.value.trim();if(!a)return;const L=y(a);s.push(L),f(s),C(c),r.value=""}),t.append(r,o),e.appendChild(t);const c=document.createElement("select");c.id="project-select",c.classList.add("priority-select");const d=document.createElement("option");d.text="-- Select Project --",d.disabled=!0,c.appendChild(d),c.addEventListener("change",()=>{i=s.find(a=>a.id===c.value),u(e)}),e.appendChild(c),C(c),c.value=i?.id;const l=document.createElement("div");l.classList.add("todo-form");const p=v("text","Title"),h=v("text","Description"),E=v("date",""),g=b(["Low","Medium","High"]),m=document.createElement("button");m.textContent="Add Task",m.classList.add("add-task-btn"),m.addEventListener("click",()=>{if(!i)return alert("Select a project first");const a=P(p.value.trim(),h.value.trim(),E.value,g.value);i.todos.push(a),f(s),u(e),O([p,h,E])}),l.append(p,h,E,g,m),e.appendChild(l);const j=document.createElement("div");j.id="todo-list",e.appendChild(j),n.appendChild(e),u(e)}function C(n){n.innerHTML="";const e=document.createElement("option");e.text="-- Select Project --",e.disabled=!0,n.appendChild(e),s.forEach(t=>{const r=document.createElement("option");r.value=t.id,r.text=t.name,n.appendChild(r)})}function u(n){const e=n.querySelector("#todo-list");if(e.innerHTML="",!i||i.todos.length===0){e.innerHTML="<p>No tasks yet.</p>";return}i.todos.forEach(t=>{const r=document.createElement("div");r.classList.add("task-card");const o=document.createElement("input");o.type="checkbox",o.checked=t.completed,o.addEventListener("change",()=>{t.completed=!t.completed,f(s),u(n)});const c=document.createElement("span");c.textContent=t.title,t.completed&&(c.style.textDecoration="line-through");const d=document.createElement("span");d.textContent=t.priority,d.classList.add("priority",t.priority);const l=document.createElement("button");l.textContent="🗑️",l.addEventListener("click",()=>{i.todos=i.todos.filter(p=>p.id!==t.id),f(s),u(n)}),r.append(o,c,d,l),e.appendChild(r)})}function v(n,e){const t=document.createElement("input");return t.type=n,t.placeholder=e,t.classList.add("form-input"),t}function b(n){const e=document.createElement("select");return e.classList.add("priority-select"),n.forEach(t=>{const r=document.createElement("option");r.value=t.toLowerCase(),r.textContent=t,e.appendChild(r)}),e}function O(n){n.forEach(e=>e.value="")}S();
